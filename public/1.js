webpackJsonp([1],{635:function(t,e,a){var r=a(3)(a(639),a(640),null,null,null);t.exports=r.exports},639:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(20),o=a(78);e.default={data:function(){return{toggleChart:!1,courses:[],isEdit:r.i,data:r.a,state_view:o.d,courseFilter:{data:[],data2:[]},customFilters:[{vals:"",props:"course"},{vals:[]},{vals:"",props:"year"},{vals:[]}],titles:[{prop:"category",label:"Categorize"},{prop:"name",label:"Name"},{prop:"year",label:"Level"},{prop:"course",label:"Course"}],actionsDef:{colProps:{span:5},def:[{name:"new",handler:function(){Object(o.b)()},buttonProps:{type:"text"}},{name:"import",handler:function(){},icon:"upload"}]},checkFilterDef:{props:"category",def:[{code:"teacher",name:"Teacher"},{code:"senior high",name:"Senior High"},{code:"outsider",name:"Outsider"},{code:"mkd student",name:"Mkd Student"}]},actionColDef:{label:"Actions",def:[{handler:function(t){Object(r.k)(t.id),Object(r.j)()},name:"Edit"},{icon:"message",type:"text",handler:function(t){},name:"RUA"}]}}},mounted:function(){Object(r.d)("/api/visitors")},computed:{pluckCourses:function(){var t=this.getData,e=_.map(t,function(t,e){return _.isEmpty(t)?null:t.course}),a=_.uniq(e);return _.filter(a,function(t){return""==t?null:t})},pluckLevel:function(){var t=this.getData,e=_.map(t,function(t,e){return _.isEmpty(t)?null:t.year}),a=_.uniq(e);return _.filter(a,function(t){return""==t?null:t})},pluckSchoolId:function(){var t=this;return _.map(t.data.data,"schoolId")},getData:function(){return _.map(this.data.data,function(t){var e=_.pick(t,"schoolId ","id","name","category","year","category_id","course","photos","photo");return{id:e.id,name:e.name,year:e.year,category:e.category?e.category.name:"",course:e.course?e.course.course:"",avatar:_.isEmpty(e.photo)?{file:null,id:null}:"/images/"+e.photo.file,schoolId:e.schoolId}})},chartCourse:function(){var t=this,e=t.getData,a=_.countBy(e,function(t){return t.course}),r=t.courseFilter.data,o=t.courseFilter.data2,l=[];for(var n in a)a.hasOwnProperty(n)&&(r.push(n),o.push(a[n]),l.push({key:n,val:a[n]}));return l},pluckYear:function(){var t=this,e=t.getData;return _.countBy(e,function(t){return t.year})}},methods:{level:function(t){var e;return e="1"==t?t+"st year":"2"==t?t+"nd year":"3"==t?t+"rd year":t+"th year",e},getRowActionsDef:function(){return[{type:"primary",handler:function(t){},name:"Edit"}]}}}},640:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-10 col-md-offset-1"},[t.state_view.state_view?a("create-data",{attrs:{pluckSchoolId:t.pluckSchoolId}}):t._e(),t._v(" "),t.isEdit.isToggle?a("edit-data",{attrs:{pluckSchoolId:t.pluckSchoolId}}):t._e(),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",slot:"header"},[a("span",{staticStyle:{"line-height":"36px"}},[t._v("\n\n                        Visitor Lists\n\n                    ")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.toggleChart=!t.toggleChart}}},[t._v("Toggle Chart")])],1),t._v(" "),t.toggleChart?a("time-line",{attrs:{type:"bar",dataSet:t.chartCourse}}):t._e(),t._v(" "),a("data-tables",{staticStyle:{"margin-top":"2vh"},attrs:{"custom-filters":t.customFilters,data:t.getData,"actions-def":t.actionsDef,"checkbox-filter-def":t.checkFilterDef,"action-col-def":t.actionColDef}},[a("el-row",{staticStyle:{"margin-bottom":"10px"},slot:"custom-tool-bar"},[a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"Filter Selected Level",multiple:"multiple"},model:{value:t.customFilters[2].vals,callback:function(e){t.customFilters[2].vals=e},expression:"customFilters[2].vals"}},t._l(t.pluckLevel,function(e,r){return a("el-option",{key:r,attrs:{label:t.level(e),value:e}})}))],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"Filter Selected Course",multiple:"multiple"},model:{value:t.customFilters[1].vals,callback:function(e){t.customFilters[1].vals=e},expression:"customFilters[1].vals"}},t._l(t.pluckCourses,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1)],1),t._v(" "),t._l(t.titles,function(t){return a("el-table-column",{key:t.label,attrs:{prop:t.prop,label:t.label,sortable:"custom"}})})],2)],1)],1)])])},staticRenderFns:[]}}});